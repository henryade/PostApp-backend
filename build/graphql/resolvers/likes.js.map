{"version":3,"sources":["../../../graphql/resolvers/likes.js"],"names":["Mutation","likePost","parent","context","postId","username","Post","findById","post","like","likes","find","filter","push","createdAt","Date","toISOString","save","UserInputError"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;eAEe;AACbA,EAAAA,QAAQ,EAAE;AACRC,IAAAA,QAAQ,EAAE,kBAAMC,MAAN,QAA0BC,OAA1B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAgBC,cAAAA,MAAhB,QAAgBA,MAAhB;AAAA;AAAA,8CACmB,wBAAYD,OAAZ,CADnB;;AAAA;AAAA;AACAE,cAAAA,QADA,SACAA,QADA;AAAA;AAAA,8CAGWC,aAAKC,QAAL,CAAcH,MAAd,CAHX;;AAAA;AAGFI,cAAAA,IAHE;;AAAA,mBAIJA,IAJI;AAAA;AAAA;AAAA;;AAKAC,cAAAA,IALA,GAKOD,IAAI,CAACE,KAAL,CAAWC,IAAX,CAAgB,UAAAF,IAAI;AAAA,uBAAIA,IAAI,CAACJ,QAAL,KAAkBA,QAAtB;AAAA,eAApB,CALP;;AAMN,kBAAII,IAAJ,EAAS;AACPD,gBAAAA,IAAI,CAACE,KAAL,GAAaF,IAAI,CAACE,KAAL,CAAWE,MAAX,CAAkB,UAAAH,IAAI;AAAA,yBAAIA,IAAI,CAACJ,QAAL,KAAkBA,QAAtB;AAAA,iBAAtB,CAAb;AACD,eAFD,MAEO;AACLG,gBAAAA,IAAI,CAACE,KAAL,CAAWG,IAAX,CAAgB;AACdR,kBAAAA,QAAQ,EAARA,QADc;AAEdS,kBAAAA,SAAS,EAAE,IAAIC,IAAJ,GAAWC,WAAX;AAFG,iBAAhB;AAID;;AAbK;AAAA,8CAcAR,IAAI,CAACS,IAAL,EAdA;;AAAA;AAAA,+CAeCT,IAfD;;AAAA;AAAA,oBAgBK,IAAIU,4BAAJ,CAAmB,gBAAnB,CAhBL;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AADG,C","sourcesContent":["import { UserInputError } from 'apollo-server';\nimport { Post } from '../../models';\nimport { verifyToken } from '../../utils';\n\nexport default {\n  Mutation: {\n    likePost: async(parent, { postId }, context) => {\n      const { username } = await verifyToken(context);\n\n      const post = await Post.findById(postId);\n      if (post) {\n        const like = post.likes.find(like => like.username === username);\n        if (like){\n          post.likes = post.likes.filter(like => like.username !== username)\n        } else {\n          post.likes.push({\n            username,\n            createdAt: new Date().toISOString()\n          });\n        }\n        await post.save();\n        return post;\n      } else throw new UserInputError('Post Not Found');\n    }\n  }\n}"],"file":"likes.js"}